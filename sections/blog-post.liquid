{%- liquid
  assign options = section.settings
  assign color_scheme = options.color_scheme
  assign show_background = options.show_background
  assign show_breadcrumbs = options.show_breadcrumbs
  assign show_blogs_home = options.show_blogs_home
  assign section_spacing_top = options.section_spacing_top
  assign section_spacing_bottom = options.section_spacing_bottom

  if color_scheme == 'default'
    assign color_scheme = settings.default_color_scheme
  endif
-%}

{% capture css %}
  {% style %}
    .section-{{section.id}}{
        --gsc-section-spacing-top: {{ section_spacing_top }}px;
        --gsc-section-spacing-bottom: {{ section_spacing_bottom }}px;
    }
  {% endstyle %}
{% endcapture %}

{{ 'article.css' | asset_url | stylesheet_tag }}
{% render 'inline-css-minifier', css: css %}

<article class='article section section-{{ section.id }} color-{{ color_scheme }}'>
  <div class='section-spacing'>
    {%- if show_background -%}
      <div class='article__background'>
        <div class='article__background-inner'>
          <div class='article__background-horizontal-square'></div>
          <div class='article__background-vertical-square'></div>
        </div>
      </div>
    {%- endif -%} 

    <div class='article__container'>
      {%- if show_breadcrumbs -%}
      <div class='article__breadcrumbs-wrap {% if show_breadcrumbs == false %} article__breadcrumbs-wrap--hidden-on-mobile{% endif %}'>
          <div class='article__breadcrumbs'>
            <a
              class='article__breadcrumbs-item'
              href='{{ routes.root_url }}'
              aria-label='{{ 'sections.blog_post.breadcrumb_home_link' | t }}'
            >
              {{- 'sections.blog_post.breadcrumb_home_link' | t -}}
            </a>
            <span class='article__breadcrumbs-divider'>/</span>
            <a
              class='article__breadcrumbs-item'
              href='{{ blog.url }}'
              aria-label='{{ 'sections.blog_post.breadcrumb_blog_link' | t }}'
            >
              {{- 'sections.blog_post.breadcrumb_blog_link' | t -}}
            </a>
            <span class='article__breadcrumbs-divider'>/</span>
            <a class='article__breadcrumbs-item' href='{{ article.url }}' aria-label='{{ article.title }}'>
              {{ article.title -}}
            </a>
          </div>
        </div>
        {%- elsif show_blogs_home -%}
        <div class="blogs_home-link">
          <a
            class='link link--reverse'
            href='{{ blog.url }}'
            aria-label='{{ 'sections.blog_post.breadcrumb_home_link' | t }}'
          >
            {% render 'icon', icon_name: 'link-chevron', class: 'link__prev__chevron' %}
            <span class='link__home__text'>Return to blogs</span>
          </a>
        </div>
        {%- endif -%}
    </div>

    <div class='article__blocks article__container'>
      {%- liquid
        for block in section.blocks
          case block.type
            when '@app'
              render 'article-block', block: block, article: article
            when 'featured_image'
              render 'article-featured-image', block: block, article: article
            when 'title'
              render 'article-title', block: block, article: article
            when 'content'
              render 'article-content', block: block, article: article
            when 'footer'
              render 'article-footer', block: block, article: article
          endcase
        endfor
      -%}
    </div>
  </div>
</article>

{% schema %}
{
  "name": "t:sections.blog_post.name",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_breadcrumbs",
      "default": true,
      "label": "t:sections.blog_post.show_breadcrumbs_label"
    },
    {
      "type": "checkbox",
      "id": "show_blogs_home",
      "default": true,
      "label": "Show Blogs Home"
    },
    {
      "type": "checkbox",
      "id": "show_background",
      "default": true,
      "label": "t:sections.blog_post.show_background_label"
    }
  ],
  "blocks": [
    {
      "type": "title",
      "name": "t:sections.blog_post.title_block_name",
      "limit": 1,
      "settings": [
        {
          "type": "color",
          "id": "title_color",
          "label": "t:sections.blog_post.title_color"
        },
        {
          "type": "checkbox",
          "id": "show_author",
          "default": true,
          "label": "t:sections.blog_post.title_block_show_author_label"
        },
        {
          "type": "checkbox",
          "id": "show_date",
          "default": true,
          "label": "t:sections.blog_post.title_block_show_date_label"
        },
        {
          "type": "checkbox",
          "id": "show_comment_count",
          "default": true,
          "label": "t:sections.blog_post.title_block_show_comment_count_label"
        },
        {
          "type": "checkbox",
          "id": "show_share_link",
          "default": true,
          "label": "t:sections.blog_post.title_block_show_share_link"
        }
      ]
    },
    {
      "type": "content",
      "name": "t:sections.blog_post.content_block_name",
      "limit": 1
    },
    {
      "type": "footer",
      "name": "t:sections.blog_post.footer_block_name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_author",
          "default": true,
          "label": "t:sections.blog_post.footer_block_show_author_label"
        },
        {
          "type": "checkbox",
          "id": "show_date",
          "default": true,
          "label": "t:sections.blog_post.footer_block_show_date_label"
        },
        {
          "type": "checkbox",
          "id": "show_share",
          "default": true,
          "label": "t:sections.blog_post.footer_block_show_share_label"
        },
        {
          "type": "checkbox",
          "id": "show_next_and_previous_posts",
          "default": true,
          "label": "t:sections.blog_post.footer_block_show_next_and_previous_posts_label"
        },
        {
          "type": "checkbox",
          "id": "show_comment_count",
          "default": true,
          "label": "t:sections.blog_post.footer_block_show_comment_count_label"
        }
      ]
    }
  ]
}
{% endschema %}